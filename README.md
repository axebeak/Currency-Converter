# Currency Converter

Скрипт для конвертации валют, базирующийся на их курсах относительно UAH. Написан, используя Symfony 4 на бэкенде и JQuery на фронтенде.

## Используемые стандарты кодирования

HTML/CSS написаны по стандартам кодирования, обозначенных [по данной ссылке](https://google.github.io/styleguide/htmlcssguide.html).

Стандарты JQuery взяты из [технической документации](https://contribute.jquery.org/style-guide/js/) фреймворка.

Используемые стандарты Symfony можно также найти в их документации [здесь](https://symfony.com/doc/current/contributing/code/standards.html).

## Описание

Доступные валюты указаны в **.env** файле, находящимся в рутовой папке приложения. Они определены внутри переменной *CURRENCIES* через запятую следующим образом:

```
CURRENCIES=USD,EUR
```

Кроме того, переменные отдельно для **Local File** метода должны быть определены  для конкретных валют подобным образом:

```
USD=27.09
EUR=30.48
```

В случае, если эти переменные не будут определены, класс **FileHelper** выдаст исключение.

Необходимости редактировать **.env** вручную нет, поскольку в **Settings** табе есть опция добавления новых валют и редактирование значений и названий старых. Кнопка **Add** добавит больше полей для ввода новых валют к списку, а кнопка **Submit** сделает Ajax-запрос с обновленными значениями валют на сервер.  Класс **SettingsHelper** перегенерирует **.env** файл с новыми значениями - при условии, что эти значения будут валидными.

Пример **.env** файла, который должен лежать в корне приложения:

```
#Currencies must be defined here, separated by commas:
CURRENCIES=USD,EUR
#Definitions of currencies for local file method:
USD=27.09
EUR=30.48
#API for currency exchange rates:
API_LINK=https://api.privatbank.ua/p24api/pubinfo?json&exchange&coursid=5
```

Для работы на серверах с Apache, необходимо переименовать htaccess.txt в .htaccess.

**External API** вытянет значения валют с API, определяющегося по переменной *API_LINK* в .env. По умолчанию, он настроен использовать API [Приват Банка](https://api.privatbank.ua/#p24/exchange).

**Random** генерирует новые курсы валют. Валюты хранятся в куках в течении 15 секунд. После истечения их срока, значения генерируются по-новой.

Валюты можно конвертировать друг в друга (включая UAH) используя "Converter" элемент в разных табах. Значение нужно писать в поле для введения данных под **Amount to convert**.

Каждые 5 секунд значения валют обновляются на страницах каждого из методов, поэтому в случае обновления списка валют или значения конкретной валюты можно не обновлять страницу, а просто немного подождать.

API-эндпоинтом служит */api* ссылка, которая поддерживает следующие несколько команд (через GET-запрос):  

```
/api?load-page=source - Загрузит страницу для определенного способа.
/api?rates=source - Получит текущие курсы валют по данному методу.
/api?currencies=currencies_list - Обновление значениев и курсов валют на сервере. currencies_list должно быть в JSON формате.
/api?val=value&cur=currency&source=source - Конвертирует конкретное значение валюты.
```
